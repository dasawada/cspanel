<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>輸入表單</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .form-container {
            width: 500px;
            margin: 0 auto;
        }
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .form-group label {
            margin-right: 10px;
        }
        .form-group input, .form-group select {
            flex: 1;
        }
        .error {
            color: red;
            display: none;
        }
        .output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
        }
        .copy-feedback {
            display: none;
            position: absolute;
            background: #4caf50;
            color: white;
            padding: 5px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<div class="form-container">
    <form id="DT_form">
        <div class="form-group">
            <label for="DT_datetime">日期時間：</label>
            <input type="datetime-local" id="DT_datetime" name="datetime" required>
            <span class="error" id="error_datetime">請填寫有效的日期時間</span>
        </div>
        <div class="form-group">
            <label for="DT_name">學生姓名：</label>
            <input type="text" id="DT_name" name="name" required>
            <label for="DT_phone">連絡電話：</label>
            <input type="text" id="DT_phone" name="phone" required>
            <span class="error" id="error_name_phone">請填寫姓名和電話</span>
        </div>
        <div class="form-group">
            <label for="DT_project">測試工程：</label>
            <input type="text" id="DT_project" name="project" required>
            <span class="error" id="error_project">請填寫測試工程</span>
        </div>
<!-- 使用設備部分 -->
<div id="DT_devices">
    <h3>使用設備</h3>
    <div class="device-group">
        <div class="form-group">
            <label for="DT_device_1">設備：</label>
            <select id="DT_device_1" name="device" required>
                <option value="-">-</option>
                <option value="筆電">筆電</option>
                <option value="桌上型電腦">桌上型電腦</option>
                <option value="平板">平板</option>
                <option value="其他">其他</option>
            </select>
            <label for="DT_brand_1">品牌：</label>
            <input type="text" id="DT_brand_1" name="brand">
        </div>
        <div class="form-group">
            <label for="DT_os_1">作業系統：</label>
            <select id="DT_os_1" name="os" required>
                <option value="-">-</option>
                <option value="Windows">Windows</option>
                <option value="MacOS">MacOS</option>
                <option value="iOS">iOS</option>
                <option value="Android">Android</option>
                <option value="其他">其他</option>
            </select>
            <label for="DT_os_version_1">版本：</label>
            <input type="text" id="DT_os_version_1" name="os_version" required>
            <span class="error" id="error_device_os">請填寫設備和作業系統信息</span>
        </div>
        <div class="form-group">
            <label for="DT_browser_1">瀏覽器：</label>
            <input type="text" id="DT_browser_1" name="browser" required>
        </div>
        <div class="form-group">
            <label>視訊規格：</label>
            <input type="radio" id="DT_video_spec_internal_1" name="video_spec_1" value="內建" required>內建
            <input type="radio" id="DT_video_spec_external_1" name="video_spec_1" value="外接" required>外接
            <label>視訊品質：</label>
            <input type="radio" id="DT_video_quality_clear_1" name="video_quality_1" value="清晰" required>清晰
            <input type="radio" id="DT_video_quality_poor_1" name="video_quality_1" value="不佳" required>不佳
            <input type="radio" id="DT_video_quality_untested_1" name="video_quality_1" value="未測試" required>未測試
            <span class="error" id="error_video">請選擇視訊規格和品質</span>
        </div>
        <div class="form-group">
            <label>耳麥規格：</label>
            <input type="radio" id="DT_audio_spec_internal_1" name="audio_spec_1" value="內建" required>內建
            <input type="radio" id="DT_audio_spec_external_1" name="audio_spec_1" value="外接" required>外接
            <label>聲音品質：</label>
            <input type="radio" id="DT_audio_quality_clear_1" name="audio_quality_1" value="清晰" required>清晰
            <input type="radio" id="DT_audio_quality_poor_1" name="audio_quality_1" value="不佳" required>不佳
            <input type="radio" id="DT_audio_quality_untested_1" name="audio_quality_1" value="未測試" required>未測試
            <span class="error" id="error_audio">請選擇耳麥規格和品質</span>
        </div>
    </div>
</div>
<button type="button" onclick="addDevice()">新增設備</button>

<!-- 網路連線部分 -->
<div id="DT_connections">
    <h3>網路連線</h3>
    <div class="connection-group">
        <div class="form-group">
            <label for="DT_provider_1">電信業者：</label>
            <input type="text" id="DT_provider_1" name="provider" required>
            <label for="DT_connection_1">連線方式：</label>
            <select id="DT_connection_1" name="connection" required>
                <option value="-">-</option>
                <option value="Wi-Fi">Wi-Fi</option>
                <option value="有線網路">有線網路</option>
                <option value="Wi-Fi+有線網路">Wi-Fi+有線網路</option>
            </select>
        </div>
        <div class="form-group">
            <label for="DT_speed_1">當前網速：</label>
            <textarea id="DT_speed_1" name="speed" required></textarea>
            <span class="error" id="error_connection">請填寫電信業者和連線方式信息</span>
        </div>
    </div>
</div>
<button type="button" onclick="addConnection()">新增網路連線</button>

        <!-- 檢測結果部分 -->
        <div class="form-group">
            <label for="DT_suitable">是否適合上課：</label>
            <input type="radio" id="DT_suitable_yes" name="suitable" value="適合" required>適合
            <input type="radio" id="DT_suitable_no" name="suitable" value="不適合" required>不適合
            <span class="error" id="error_suitable">請選擇是否適合上課</span>
        </div>
        <div class="form-group">
            <label for="DT_issues">測試問題：</label>
            <textarea id="DT_issues" name="issues" required></textarea>
            <span class="error" id="error_issues">請填寫測試問題</span>
        </div>
        <div class="form-group">
            <label for="DT_process">處理過程：</label>
            <textarea id="DT_process" name="process" required></textarea>
            <span class="error" id="error_process">請填寫處理過程</span>
        </div>
        <button type="submit">提交</button>
    </form>
    <div class="output" id="DT_output">
        <div id="output_content">填寫表單後顯示此處</div>
        <div class="copy-feedback" id="copy_feedback">已複製!</div>
    </div>
</div>

<script>
document.getElementById('DT_form').addEventListener('submit', function (e) {
    e.preventDefault();
    let errors = false;

    // 清除舊的錯誤訊息
    document.querySelectorAll('.error').forEach(function (el) {
        el.style.display = 'none';
    });

    // 簡單驗證邏輯
    if (!document.getElementById('DT_datetime').value) {
        document.getElementById('error_datetime').style.display = 'block';
        errors = true;
    }
    if (!document.getElementById('DT_name').value || !document.getElementById('DT_phone').value) {
        document.getElementById('error_name_phone').style.display = 'block';
        errors = true;
    }
    if (!document.getElementById('DT_project').value) {
        document.getElementById('error_project').style.display = 'block';
        errors = true;
    }
    document.querySelectorAll('[id^="DT_device_"]').forEach(function (el, index) {
        const osId = `DT_os_${index + 1}`;
        const osVersionId = `DT_os_version_${index + 1}`;
        if (el.value === '-' || !document.getElementById(osVersionId).value) {
            document.getElementById(`error_device_os_${index + 1}`).style.display = 'block';
            errors = true;
        }
    });
    document.querySelectorAll('[name^="video_spec_"]').forEach(function (el, index) {
        const videoQualityName = `video_quality_${index + 1}`;
        if (!document.querySelector(`input[name="${el.name}"]:checked`) || !document.querySelector(`input[name="${videoQualityName}"]:checked`)) {
            document.getElementById('error_video').style.display = 'block';
            errors = true;
        }
    });
    document.querySelectorAll('[name^="audio_spec_"]').forEach(function (el, index) {
        const audioQualityName = `audio_quality_${index + 1}`;
        if (!document.querySelector(`input[name="${el.name}"]:checked`) || !document.querySelector(`input[name="${audioQualityName}"]:checked`)) {
            document.getElementById('error_audio').style.display = 'block';
            errors = true;
        }
    });
    document.querySelectorAll('[id^="DT_provider_"]').forEach(function (el, index) {
        const connectionId = `DT_connection_${index + 1}`;
        if (!el.value || document.getElementById(connectionId).value === '-') {
            document.getElementById(`error_connection_${index + 1}`).style.display = 'block';
            errors = true;
        }
    });
    if (!document.querySelector('input[name="suitable"]:checked')) {
        document.getElementById('error_suitable').style.display = 'block';
        errors = true;
    }
    if (!document.getElementById('DT_issues').value) {
        document.getElementById('error_issues').style.display = 'block';
        errors = true;
    }
    if (!document.getElementById('DT_process').value) {
        document.getElementById('error_process').style.display = 'block';
        errors = true;
    }

    if (!errors) {
        generateOutput();
    }
});

function generateOutput() {
    const datetime = document.getElementById('DT_datetime').value;
    const name = document.getElementById('DT_name').value;
    const phone = document.getElementById('DT_phone').value;
    const project = document.getElementById('DT_project').value;

    let deviceOutput = '';
    document.querySelectorAll('.device-group').forEach(function (el, index) {
        const device = document.getElementById(`DT_device_${index + 1}`).value;
        const brand = document.getElementById(`DT_brand_${index + 1}`).value;
        const os = document.getElementById(`DT_os_${index + 1}`).value;
        const osVersion = document.getElementById(`DT_os_version_${index + 1}`).value;
        const browser = document.getElementById(`DT_browser_${index + 1}`).value;
        const videoSpec = document.querySelector(`input[name="video_spec_${index + 1}"]:checked`).value;
        const videoQuality = document.querySelector(`input[name="video_quality_${index + 1}"]:checked`).value;
        const audioSpec = document.querySelector(`input[name="audio_spec_${index + 1}"]:checked`).value;
        const audioQuality = document.querySelector(`input[name="audio_quality_${index + 1}"]:checked`).value;

        deviceOutput += `
        使用設備（${index + 1}）：
            設備機型：【${device} ${brand}】
            作業系統：【${os}】 版本：【${osVersion}】 補充資訊：
            瀏覽器：【${browser}】
            視訊規格：【${videoSpec}】 視訊品質：【${videoQuality}】
            耳麥規格：【${audioSpec}】 聲音品質：【${audioQuality}】\n
        `;
    });

    let connectionOutput = '';
    document.querySelectorAll('.connection-group').forEach(function (el, index) {
        const provider = document.getElementById(`DT_provider_${index + 1}`).value;
        const connection = document.getElementById(`DT_connection_${index + 1}`).value;
        const speed = document.getElementById(`DT_speed_${index + 1}`).value;

        connectionOutput += `
        網路連線（${index + 1}）：
            電信業者：【${provider}】 連線方式：【${connection}】
            當前網速：
            ${speed}\n
        `;
    });

    const suitable = document.querySelector('input[name="suitable"]:checked').value;
    const issues = document.getElementById('DT_issues').value;
    const process = document.getElementById('DT_process').value;

    let outputContent = `
        日期時間：【${datetime}】
        學生姓名：【${name}】 連絡電話：【${phone}】
        測試工程：【${project}】

        ${deviceOutput}

        ${connectionOutput}

        是否適合上課：【${suitable}】

        測試問題：
        ${issues}

        處理過程：
        ${process}
    `;

    document.getElementById('output_content').innerText = outputContent.trim();

    const copyFeedback = document.getElementById('copy_feedback');
    copyFeedback.style.display = 'block';
    setTimeout(() => {
        copyFeedback.style.display = 'none';
    }, 2000);
}

let deviceCount = 1;
let connectionCount = 1;

function addDevice() {
    deviceCount++;
    const deviceContainer = document.getElementById('DT_devices');
    const newDevice = document.createElement('div');
    newDevice.className = 'device-group';
    newDevice.innerHTML = `
        <div class="form-group">
            <label for="DT_device_${deviceCount}">設備：</label>
            <select id="DT_device_${deviceCount}" name="device_${deviceCount}" required>
                <option value="-">-</option>
                <option value="筆電">筆電</option>
                <option value="桌上型電腦">桌上型電腦</option>
                <option value="平板">平板</option>
                <option value="其他">其他</option>
            </select>
            <label for="DT_brand_${deviceCount}">品牌：</label>
            <input type="text" id="DT_brand_${deviceCount}" name="brand_${deviceCount}">
        </div>
        <div class="form-group">
            <label for="DT_os_${deviceCount}">作業系統：</label>
            <select id="DT_os_${deviceCount}" name="os_${deviceCount}" required>
                <option value="-">-</option>
                <option value="Windows">Windows</option>
                <option value="MacOS">MacOS</option>
                <option value="iOS">iOS</option>
                <option value="Android">Android</option>
                <option value="其他">其他</option>
            </select>
            <label for="DT_os_version_${deviceCount}">版本：</label>
            <input type="text" id="DT_os_version_${deviceCount}" name="os_version_${deviceCount}" required>
        </div>
        <div class="form-group">
            <label for="DT_browser_${deviceCount}">瀏覽器：</label>
            <input type="text" id="DT_browser_${deviceCount}" name="browser_${deviceCount}" required>
        </div>
        <div class="form-group">
            <label>視訊規格：</label>
            <input type="radio" id="DT_video_spec_internal_${deviceCount}" name="video_spec_${deviceCount}" value="內建" required>內建
            <input type="radio" id="DT_video_spec_external_${deviceCount}" name="video_spec_${deviceCount}" value="外接" required>外接
            <label>視訊品質：</label>
            <input type="radio" id="DT_video_quality_clear_${deviceCount}" name="video_quality_${deviceCount}" value="清晰" required>清晰
            <input type="radio" id="DT_video_quality_poor_${deviceCount}" name="video_quality_${deviceCount}" value="不佳" required>不佳
            <input type="radio" id="DT_video_quality_untested_${deviceCount}" name="video_quality_${deviceCount}" value="未測試" required>未測試
        </div>
        <div class="form-group">
            <label>耳麥規格：</label>
            <input type="radio" id="DT_audio_spec_internal_${deviceCount}" name="audio_spec_${deviceCount}" value="內建" required>內建
            <input type="radio" id="DT_audio_spec_external_${deviceCount}" name="audio_spec_${deviceCount}" value="外接" required>外接
            <label>聲音品質：</label>
            <input type="radio" id="DT_audio_quality_clear_${deviceCount}" name="audio_quality_${deviceCount}" value="清晰" required>清晰
            <input type="radio" id="DT_audio_quality_poor_${deviceCount}" name="audio_quality_${deviceCount}" value="不佳" required>不佳
            <input type="radio" id="DT_audio_quality_untested_${deviceCount}" name="audio_quality_${deviceCount}" value="未測試" required>未測試
        </div>
    `;
    deviceContainer.appendChild(newDevice);
}

function addConnection() {
    connectionCount++;
    const connectionContainer = document.getElementById('DT_connections');
    const newConnection = document.createElement('div');
    newConnection.className = 'connection-group';
    newConnection.innerHTML = `
        <div class="form-group">
            <label for="DT_provider_${connectionCount}">電信業者：</label>
            <input type="text" id="DT_provider_${connectionCount}" name="provider_${connectionCount}" required>
            <label for="DT_connection_${connectionCount}">連線方式：</label>
            <select id="DT_connection_${connectionCount}" name="connection_${connectionCount}" required>
                <option value="-">-</option>
                <option value="Wi-Fi">Wi-Fi</option>
                <option value="有線網路">有線網路</option>
                <option value="Wi-Fi+有線網路">Wi-Fi+有線網路</option>
            </select>
        </div>
        <div class="form-group">
            <label for="DT_speed_${connectionCount}">當前網速：</label>
            <textarea id="DT_speed_${connectionCount}" name="speed_${connectionCount}" required></textarea>
        </div>
    `;
    connectionContainer.appendChild(newConnection);
}

</script>

</body>
</html>
