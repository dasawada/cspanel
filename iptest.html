<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP 查詢工具</title>
    <style>
        #result {
            margin-top: 20px;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <h1>IP 查詢工具</h1>
    <label for="ipInput">輸入 IP 位址：</label>
    <input type="text" id="ipInput" placeholder="例: 125.227.51.53">
    <button onclick="queryIP()">查詢</button>

    <div id="result"></div>

    <script>
        function queryIP() {
            const ip = document.getElementById('ipInput').value;
            const apiUrl = `https://wq.apnic.net/query?searchtext=${ip}`;

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log(data); // 確認 API 回應的資料
                    displayResult(data);
                })
                .catch(error => {
                    console.error('API 請求失敗:', error);
                    document.getElementById('result').innerHTML = '查詢失敗，請確認 IP 位址是否正確。';
                });
        }

        function displayResult(data) {
            const resultDiv = document.getElementById('result');
            if (data && data.response) {
                resultDiv.innerHTML = `
                    <h2>查詢結果：</h2>
                    <p><strong>IP 位址：</strong>${data.response.query.ip}</p>
                    <p><strong>國家：</strong>${data.response.query.country}</p>
                    <p><strong>組織：</strong>${data.response.query.org}</p>
                `;
            } else {
                resultDiv.innerHTML = '未找到相關資訊。';
            }
        }
    </script>
</body>
</html>
